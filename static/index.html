<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agent BIM Romania â€” by Consult Engineering InstalaÈ›ii SRL</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="layout">

  <!-- â•â•â• SIDEBAR â•â•â• -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-brand">
      <div class="brand-icon">
        <svg width="36" height="36" viewBox="0 0 40 40" fill="none">
          <rect width="40" height="40" rx="10" fill="url(#brandGrad)"/>
          <path d="M10 29L20 12L30 29H10Z" fill="white" opacity=".92"/>
          <rect x="15" y="21" width="10" height="8" rx="1" fill="white" opacity=".65"/>
          <defs>
            <linearGradient id="brandGrad" x1="0" y1="0" x2="40" y2="40" gradientUnits="userSpaceOnUse">
              <stop offset="0%" stop-color="#2563EB"/>
              <stop offset="100%" stop-color="#7C3AED"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div class="brand-text">
        <div class="brand-name">Agent BIM Romania</div>
        <div class="brand-sub">by Consult Engineering InstalaÈ›ii SRL</div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a class="nav-item active" data-section="dashboard" href="#">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/></svg>
        <span>Dashboard</span>
      </a>
      <a class="nav-item" data-section="generator" href="#">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/></svg>
        <span>Generator BIM</span>
        <span class="nav-badge">7</span>
      </a>
      <a class="nav-item" data-section="chat" href="#">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/></svg>
        <span>Chat Expert BIM</span>
      </a>

      <div class="nav-sep"></div>

      <a class="nav-item" data-section="documents" href="#">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
        <span>AdaugÄƒ Documente</span>
      </a>
      <a class="nav-item" data-section="downloads" href="#">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/></svg>
        <span>Documente Generate</span>
        <span class="nav-badge" id="dlBadge" style="display:none">0</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="footer-meta">Agent BIM Romania<br>by Consult Engineering InstalaÈ›ii SRL</div>
      <button class="logout-btn" onclick="logout()" title="Deconectare">
        <svg width="15" height="15" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
        Deconectare
      </button>
    </div>
  </aside>

  <!-- â•â•â• MAIN â•â•â• -->
  <div class="main-wrap">
    <!-- Top bar -->
    <header class="topbar">
      <button class="topbar-menu" id="menuToggle" title="Meniu">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg>
      </button>
      <div class="topbar-title-wrap">
        <h1 class="topbar-title" id="topbarTitle">Dashboard</h1>
      </div>
      <div class="topbar-actions">
        <!-- chunks hidden per user request -->
      </div>
    </header>

    <!-- â”€â”€â”€ DASHBOARD â”€â”€â”€ -->
    <section class="page active" id="page-dashboard">
      <div class="page-content">
        <div class="stat-grid">
          <div class="stat-card purple">
            <div class="stat-icon purple">
              <svg viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"/></svg>
            </div>
            <div class="stat-body">
              <div class="stat-value" id="statProjects">â€”</div>
              <div class="stat-label">Proiecte active</div>
            </div>
          </div>
          <div class="stat-card blue">
            <div class="stat-icon blue">
              <svg viewBox="0 0 20 20" fill="currentColor"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/></svg>
            </div>
            <div class="stat-body">
              <div class="stat-value" id="statDocs">â€”</div>
              <div class="stat-label">Documente BIM</div>
            </div>
          </div>
          <div class="stat-card amber">
            <div class="stat-icon amber">
              <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
            </div>
            <div class="stat-body">
              <div class="stat-value" id="statGenerated">â€”</div>
              <div class="stat-label">Documente generate</div>
            </div>
          </div>
          <div class="stat-card green">
            <div class="stat-icon green">
              <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
            </div>
            <div class="stat-body">
              <div class="stat-value" id="statChunks">â€”</div>
              <div class="stat-label">CunoÈ™tinÈ›e BIM indexate</div>
            </div>
          </div>
        </div>

        <div class="dash-grid">
          <!-- Quick actions -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">âš¡ AcÈ›iuni rapide</h3>
            </div>
            <div class="quick-actions">
              <button class="qa-btn" onclick="goGenerateType('bep')">
                <span class="qa-icon">ğŸ“‹</span><span>GenereazÄƒ BEP</span>
              </button>
              <button class="qa-btn" onclick="goGenerateType('lod')">
                <span class="qa-icon">ğŸ“Š</span><span>Matrice LOD</span>
              </button>
              <button class="qa-btn" onclick="goGenerateType('eir')">
                <span class="qa-icon">ğŸ“„</span><span>EIR</span>
              </button>
              <button class="qa-btn" onclick="goGenerateType('requirements')">
                <span class="qa-icon">ğŸ”</span><span>CerinÈ›e BIM</span>
              </button>
              <button class="qa-btn" onclick="showSection('documents')">
                <span class="qa-icon">â¬†ï¸</span><span>AdaugÄƒ documente</span>
              </button>
              <button class="qa-btn" onclick="showSection('chat')">
                <span class="qa-icon">ğŸ’¬</span><span>Chat expert</span>
              </button>
            </div>
          </div>

          <!-- Proiecte -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">ğŸ“ Proiecte active</h3>
            </div>
            <div id="projectsList" class="projects-list">
              <div class="empty-state">Se Ã®ncarcÄƒ...</div>
            </div>
          </div>

          <!-- Ultimele generate -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">ğŸ“„ Ultimele documente generate</h3>
              <a class="card-link" onclick="showSection('downloads')" href="#">Vezi toate â†’</a>
            </div>
            <div id="recentGenerated" class="recent-list">
              <div class="empty-state">Nu existÄƒ documente generate Ã®ncÄƒ.</div>
            </div>
          </div>

          <!-- Re-indexare -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">ğŸ”„ Actualizare bazÄƒ de cunoÈ™tinÈ›e</h3>
            </div>
            <div style="font-size:13px;color:var(--g500);margin-bottom:14px;line-height:1.6">
              DupÄƒ ce adaugi documente noi, apasÄƒ butonul de mai jos pentru a actualiza baza de cunoÈ™tinÈ›e BIM a agentului.
            </div>
            <button class="btn btn-primary" onclick="triggerReindex()" id="reindexBtn" style="width:100%">
              ğŸ”„ ActualizeazÄƒ cunoÈ™tinÈ›ele BIM
            </button>
            <div class="reindex-status" id="reindexStatus" style="display:none;margin-top:10px"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- â”€â”€â”€ DOCUMENTE (upload only) â”€â”€â”€ -->
    <section class="page" id="page-documents">
      <div class="page-content">
        <div class="page-header-row">
          <div>
            <h2 class="page-title">AdaugÄƒ Documente</h2>
            <p class="page-sub">ÃncarcÄƒ fiÈ™iere PDF sau DOCX pentru a extinde cunoÈ™tinÈ›ele agentului BIM</p>
          </div>
        </div>

        <!-- Upload zone -->
        <div class="card upload-card">
          <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">ğŸ“</div>
            <div class="upload-text">Trage fiÈ™ierele PDF sau DOCX aici</div>
            <div class="upload-sub">sau apasÄƒ pentru a selecta fiÈ™ierele</div>
            <input type="file" id="fileInput" multiple accept=".pdf,.docx" style="display:none"/>
          </div>
          <div class="upload-options">
            <label class="form-label">Proiect destinaÈ›ie:</label>
            <div class="upload-row">
              <select id="uploadProject" class="form-select">
                <option value="Uploads">Uploads (general)</option>
              </select>
              <span class="form-or">sau proiect nou:</span>
              <input type="text" id="uploadProjectNew" class="form-input" placeholder="Ex: ProiectNou2025"/>
              <button class="btn btn-primary" id="uploadBtn" disabled>â¬† ÃncarcÄƒ</button>
            </div>
          </div>
          <div id="uploadProgress" style="display:none">
            <div class="progress-bar"><div class="progress-fill" id="uploadFill"></div></div>
            <div class="progress-label" id="uploadLabel">Se Ã®ncarcÄƒ...</div>
          </div>
          <div id="uploadResult" style="display:none"></div>
        </div>

        <!-- Banner re-indexare -->
        <div class="reindex-banner" id="reindexBanner" style="display:none">
          <span>ğŸ“Œ Ai fiÈ™iere noi care nu sunt indexate Ã®ncÄƒ.</span>
          <button class="btn btn-sm btn-primary" onclick="triggerReindex()">ActualizeazÄƒ acum</button>
        </div>
      </div>
    </section>

    <!-- â”€â”€â”€ GENERATOR â”€â”€â”€ -->
    <section class="page" id="page-generator">
      <div class="page-content">
        <div class="page-header-row">
          <div>
            <h2 class="page-title">Generator BIM</h2>
            <p class="page-sub">SelecteazÄƒ proiectul È™i tipul documentului. Generarea dureazÄƒ 30â€“90 secunde.</p>
          </div>
          <div class="project-selector-wrap">
            <label class="form-label">Proiect activ:</label>
            <select id="genProject" class="form-select lg">
              <option value="">â€” SelecteazÄƒ proiectul â€”</option>
            </select>
          </div>
        </div>

        <div id="genAlert" class="alert" style="display:none"></div>

        <div class="gen-grid" id="genGrid">
          <!-- BEP -->
          <div class="gen-card" data-type="bep" onclick="startGenerate('bep')">
            <div class="gen-card-icon blue">ğŸ“‹</div>
            <div class="gen-card-body">
              <div class="gen-card-title">Plan de ExecuÈ›ie BIM</div>
              <div class="gen-card-sub">BEP complet: echipÄƒ, CDE, LOD, livrabile, standarde ISO 19650</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="bep" onclick="event.stopPropagation();startGenerate('bep')">GenereazÄƒ</button>
          </div>
          <!-- LOD -->
          <div class="gen-card" data-type="lod" onclick="startGenerate('lod')">
            <div class="gen-card-icon green">ğŸ“Š</div>
            <div class="gen-card-body">
              <div class="gen-card-title">Matrice LOD / LOI</div>
              <div class="gen-card-sub">Niveluri de detaliu LOD 100â€“400 pe faze È™i elemente BIM</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="lod" onclick="event.stopPropagation();startGenerate('lod')">GenereazÄƒ</button>
          </div>
          <!-- EIR -->
          <div class="gen-card" data-type="eir" onclick="startGenerate('eir')">
            <div class="gen-card-icon purple">ğŸ“„</div>
            <div class="gen-card-body">
              <div class="gen-card-title">CerinÈ›e Beneficiar (EIR)</div>
              <div class="gen-card-sub">Employer's Information Requirements conform ISO 19650-2</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="eir" onclick="event.stopPropagation();startGenerate('eir')">GenereazÄƒ</button>
          </div>
          <!-- Requirements -->
          <div class="gen-card" data-type="requirements" onclick="startGenerate('requirements')">
            <div class="gen-card-icon amber">ğŸ”</div>
            <div class="gen-card-body">
              <div class="gen-card-title">Extragere CerinÈ›e BIM</div>
              <div class="gen-card-sub">ScaneazÄƒ documentele proiectului È™i extrage toate cerinÈ›ele BIM</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="requirements" onclick="event.stopPropagation();startGenerate('requirements')">GenereazÄƒ</button>
          </div>
          <!-- Checklist -->
          <div class="gen-card" data-type="checklist" onclick="startGenerate('checklist')">
            <div class="gen-card-icon red">âœ…</div>
            <div class="gen-card-body">
              <div class="gen-card-title">Checklist Coordonare</div>
              <div class="gen-card-sub">Checklist complet de coordonare BIM: modele, clash, CDE, È™edinÈ›e</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="checklist" onclick="event.stopPropagation();startGenerate('checklist')">GenereazÄƒ</button>
          </div>
          <!-- Minutes -->
          <div class="gen-card" data-type="minutes" onclick="startGenerate('minutes')">
            <div class="gen-card-icon teal">ğŸ“</div>
            <div class="gen-card-body">
              <div class="gen-card-title">MinutÄƒ È˜edinÈ›Äƒ BIM</div>
              <div class="gen-card-sub">Template completabil pentru minuta È™edinÈ›ei de coordonare BIM</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="minutes" onclick="event.stopPropagation();startGenerate('minutes')">GenereazÄƒ</button>
          </div>
          <!-- ISO -->
          <div class="gen-card" data-type="iso" onclick="startGenerate('iso')">
            <div class="gen-card-icon gray">ğŸ›ï¸</div>
            <div class="gen-card-body">
              <div class="gen-card-title">AnalizÄƒ ISO 19650</div>
              <div class="gen-card-sub">VerificÄƒ conformitatea proiectului cu standardul ISO 19650-2</div>
            </div>
            <button class="btn btn-primary gen-btn" data-type="iso" onclick="event.stopPropagation();startGenerate('iso')">GenereazÄƒ</button>
          </div>
        </div>

        <!-- Progress panel -->
        <div class="gen-progress-panel" id="genProgressPanel" style="display:none">
          <div class="gen-progress-inner">
            <div class="spinner"></div>
            <div class="gen-progress-text">
              <strong id="genProgressTitle">Se genereazÄƒ...</strong>
              <span id="genProgressSub">Documentul este creat cu ajutorul AI. DureazÄƒ 30â€“90 secunde.</span>
            </div>
          </div>
        </div>

        <!-- Result -->
        <div class="gen-result" id="genResult" style="display:none">
          <div class="gen-result-icon">âœ…</div>
          <div class="gen-result-body">
            <strong id="genResultTitle">Document generat!</strong>
            <span id="genResultFile"></span>
          </div>
          <a class="btn btn-primary" id="genResultDownload" href="#" download>â¬‡ DescarcÄƒ</a>
          <button class="btn btn-outline" onclick="generateAnother()">+ GenereazÄƒ altul</button>
        </div>
      </div>
    </section>

    <!-- â”€â”€â”€ CHAT â”€â”€â”€ -->
    <section class="page" id="page-chat">
      <div class="chat-layout">
        <div class="messages-container" id="messagesContainer">
          <div class="welcome-message" id="welcomeMsg">
            <div class="welcome-icon">
              <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                <rect width="64" height="64" rx="16" fill="url(#chatGrad)"/>
                <path d="M16 44L32 20L48 44H16Z" fill="white" opacity=".85"/>
                <rect x="23" y="32" width="18" height="12" rx="2" fill="white" opacity=".6"/>
                <defs>
                  <linearGradient id="chatGrad" x1="0" y1="0" x2="64" y2="64" gradientUnits="userSpaceOnUse">
                    <stop offset="0%" stop-color="#2563EB"/>
                    <stop offset="100%" stop-color="#7C3AED"/>
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <h2>Expert BIM RomÃ¢nia</h2>
            <p>Pune orice Ã®ntrebare despre BIM, ISO 19650, CDE, Revit sau specificul proiectelor tale. RÄƒspunsurile sunt bazate pe documentele È™i standardele BIM indexate.</p>
            <div class="welcome-chips">
              <button class="chip" data-msg="Ce este BIM È™i de ce este important pentru RomÃ¢nia?">Ce este BIM?</button>
              <button class="chip" data-msg="Care este termenul limitÄƒ 2026 pentru digitalizarea construcÈ›iilor?">Termenul 2026</button>
              <button class="chip" data-msg="Ce prevede ISO 19650-2 pentru EIR È™i BEP?">ISO 19650</button>
              <button class="chip" data-msg="Care sunt cei 4 piloni ai implementÄƒrii BIM?">Cei 4 piloni BIM</button>
              <button class="chip" data-msg="Cum funcÈ›ioneazÄƒ clash detection Ã®n Navisworks?">Clash detection</button>
              <button class="chip" data-msg="Ce este un CDE È™i de ce Ã®l folosim?">CDE</button>
            </div>
          </div>
        </div>
        <div class="chat-input-area">
          <div class="chat-input-wrap">
            <textarea id="userInput" placeholder="Scrie Ã®ntrebarea ta despre BIM, ISO 19650, Revit..." rows="1" maxlength="4000"></textarea>
            <button class="send-btn" id="sendBtn" title="Trimite (Enter)">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor"><path d="M18 10L2 3L6 10L2 17L18 10Z"/></svg>
            </button>
          </div>
          <div class="chat-input-hint">Enter = trimite &bull; Shift+Enter = linie nouÄƒ &bull;
            <button class="link-btn" id="newChatBtn">ConversaÈ›ie nouÄƒ</button>
          </div>
        </div>
      </div>
    </section>

    <!-- â”€â”€â”€ DOWNLOADS â”€â”€â”€ -->
    <section class="page" id="page-downloads">
      <div class="page-content">
        <div class="page-header-row">
          <div>
            <h2 class="page-title">Documente Generate</h2>
            <p class="page-sub">Documentele DOCX create de agent, disponibile pentru descÄƒrcare</p>
          </div>
          <button class="btn btn-outline" onclick="loadGenerated()">ğŸ”„ ReÃ®ncarcÄƒ</button>
        </div>
        <div class="card">
          <div class="table-wrap">
            <table class="data-table" id="generatedTable">
              <thead>
                <tr>
                  <th>FiÈ™ier</th>
                  <th>Tip document</th>
                  <th>Proiect</th>
                  <th>DatÄƒ generare</th>
                  <th>MÄƒrime</th>
                  <th>AcÈ›iune</th>
                </tr>
              </thead>
              <tbody id="generatedBody">
                <tr><td colspan="6" class="empty-cell">Se Ã®ncarcÄƒ...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

  </div><!-- /main-wrap -->
</div><!-- /layout -->

<script src="app.js"></script>
</body>
</html>
